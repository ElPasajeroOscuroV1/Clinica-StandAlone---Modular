<div class="appointments-container">
    <div class="form-section">
      <h2>Programar Nueva Cita</h2>

      <div *ngIf="successMessage" class="alert alert-success">
        {{ successMessage }}
      </div>

      <div *ngIf="errorMessage" class="alert alert-danger">
        {{ errorMessage }}
      </div>

      <form [formGroup]="appointmentForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="patient_name">Nombre del Paciente</label>
          <input
            type="text"
            id="patient_name"
            formControlName="patient_name"
            class="form-control"
            placeholder="Ingrese el nombre del paciente"
          >
        </div>
  
        <div class="form-group">
          <label for="doctor">Doctor</label>
          <input
            type="text"
            id="doctor"
            formControlName="doctor"
            class="form-control"
            placeholder="Seleccione el doctor"
          >
        </div>
  
        <div class="form-group">
          <label for="date">Fecha</label>
          <input
            type="date"
            id="date"
            formControlName="date"
            class="form-control"
          >
        </div>
  
        <div class="form-group">
          <label for="time">Hora</label>
          <input
            type="time"
            id="time"
            formControlName="time"
            class="form-control"
          >
        </div>
  
        <div class="form-group">
          <label for="reason">Motivo de la Cita</label>
          <textarea
            id="reason"
            formControlName="reason"
            class="form-control"
            placeholder="Describa el motivo de la cita"
          ></textarea>
        </div>
  
        <button type="submit" [disabled]="!appointmentForm.valid || isLoading">
          {{ isLoading ? 'Programando...' : 'Programar Cita' }}
        </button>
      </form>
    </div>
  
    <div class="appointments-list">
      <h2>Citas Programadas</h2>
      <div class="appointment-card" *ngFor="let appointment of appointments; let i = index">
        <div class="appointment-details">
          <h3>{{ appointment.patient_name }}</h3>
          <p><strong>Doctor:</strong> {{ appointment.doctor }}</p>
          <p><strong>Fecha:</strong> {{ appointment.date | date:'dd/MM/yyyy' }}</p>
          <p><strong>Hora:</strong> {{ appointment.time }}</p>
          <p><strong>Motivo:</strong> {{ appointment.reason }}</p>
        </div>
        <button class="delete-btn" (click)="deleteAppointment(i)">Cancelar Cita</button>
      </div>
    </div>
  </div>